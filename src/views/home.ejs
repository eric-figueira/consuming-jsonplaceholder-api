<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Home Page - Posts</title>
        <link rel="stylesheet" href="/styles/home.css" type="text/css">
    </head>
    <body class="light has-bg-transition">
        <div class="theme-switcher-container has-bg-transition" onclick="switchTheme()">
            <a href="javascript: void(0);" id="theme-switcher">
                <img src="/images/dark-icon.png" alt="Theme Switcher Icon" id="theme-icon">
            </a>
        </div>
        <main class="has-bg-transition">
            <h1 class="main-title has-text-transition">What's on Trend</h1>
            <% for (let i = 0; i < final_render_response.length; i++) { %>
                <div class="post-container">
                    <div class="post has-bg-transition">
                        <div class="user-info-container">
                            <div class="user-img">
                                <img src="<%= final_render_response[i]["profileImg"] %>" alt="Profile Image">
                            </div>
                            <h2 class="has-text-transition">
                                <a href="/profile/<%= final_render_response[i]["username"] %>"><%= final_render_response[i]["username"] %></a>
                            </h2>
                        </div>
                        <div class="album-container">
                            <div class="album-image-container">
                                <img src="<%= final_render_response[i]["thumbnailUrl"] %>" alt="Album Image">
                            </div>
                            <div class="album-info-container">
                                <h1 style="text-transform: capitalize; margin-bottom: 10px;" class="has-text-transition">
                                    <a href="/post/<%= final_render_response[i]["title"] %>"><%= final_render_response[i]["title"] %></a>
                                </h1>
                                <h3><%= final_render_response[i]["body"] %></h3>
                                <p class="comments-number has-text-transition"><%= final_render_response[i]["numComments"] %> coment√°rio(s)</p>
                            </div>
                        </div>
                    </div>
                </div>
            <% } %>
        </main>

        <script>

            switchTheme = () => {

                const body = document.body;
                const themeIcon = document.querySelector('#theme-icon');

                if (body.classList.contains('light')) {
                    body.classList.replace('light', 'dark')
                    themeIcon.src = '/images/light-icon.png'
                    themeIcon.style.filter = 'invert(1)'
                } else if (body.classList.contains('dark')) {
                    body.classList.replace('dark', 'light');
                    themeIcon.src = '/images/dark-icon.png'
                    themeIcon.style.filter = 'invert(0)'
                } 
            }

        </script>
    </body>
</html>